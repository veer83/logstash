---
- name: Check if Logstash keystore exists
  shell: test -f /etc/logstash/logstash.keystore
  register: keystore_exists
  ignore_errors: true

- name: Create Logstash keystore
  command: echo "simplepassword" | /usr/share/logstash/bin/logstash-keystore create --path.settings /etc/logstash/
  args:
    creates: /etc/logstash/logstash.keystore
  when: keystore_exists.rc != 0
